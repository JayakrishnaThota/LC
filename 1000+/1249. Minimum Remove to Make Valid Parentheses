//O(n) time and space
class Solution {
    public String minRemoveToMakeValid(String s) {
        if(s==null || s.length()==0) return "";
        int n = s.length(), par = 0, open = 0;
        StringBuilder sb = new StringBuilder();
        for(char c:s.toCharArray()) {
            if(c=='(') { 
                par++;
                open++;
            }
            else if(c==')') {
                par--;
                if(par<0) { par = 0; continue; }
            }
            sb.append(c);
        }
        int openCount = open - par;
        StringBuilder res = new StringBuilder();
        for(int i=0;i<sb.length();i++) {
            char c = sb.charAt(i);
            if(c=='(') {
                if(openCount==0) continue;
                openCount--;
            }
            res.append(c);
        }
        return res.toString();
    }
}
